# 機能仕様書テンプレート集

SKILL.mdから参照される仕様書テンプレート。全体像とデータフローの理解を重視した構成。

## テンプレート: 単機能仕様書

1つの機能・モジュールの振る舞いと処理フロー。

```markdown
# [機能名] 仕様書

> 生成日: [YYYY-MM-DD]
> 対象ファイル: [ファイルパス一覧]

## 概要

[機能の目的・役割を1〜3文で記述]

## 処理フロー

[ユーザーのアクションから最終結果までの流れを番号付きで記述]

1. [起点: ユーザーアクション or トリガー]
2. [処理ステップ]
3. [処理ステップ]
4. [結果: 出力 or 状態変更]

## データフロー

[Mermaidフローチャートでデータの流れを図示]

## 主要な分岐・条件

| 条件 | 振る舞い |
|------|---------|
| [条件1] | [対応する処理] |
| [条件2] | [対応する処理] |

## 依存関係

- [依存するモジュール・外部サービスとその役割]

## テストから抽出した振る舞い

- [テストケースから読み取れる仕様・エッジケース]
```

## テンプレート: グループ仕様書

関連する複数機能のまとまりと機能間の関係。

```markdown
# [機能グループ名] 仕様書

> 生成日: [YYYY-MM-DD]
> 対象ディレクトリ: [ディレクトリパス]

## 概要

[機能グループの目的・責務を記述]

## 機能一覧

| # | 機能名 | 概要 |
|---|--------|------|
| 1 | [名前] | [何をする機能か] |

## アーキテクチャ

[モジュール構成・レイヤー構造を記述。Mermaidダイアグラム推奨]

## データフロー

[機能グループ全体のデータの流れをMermaidフローチャートで図示]

## データモデル

[機能グループで扱う主要なデータ構造の概要]

### [モデル名]

[モデルの役割と主要フィールドの説明]

## 機能間の関係

[どの機能がどの機能に依存しているか、データがどう受け渡されるかを記述]

## 各機能の概要

### [機能1名]

- **目的**: [1文で]
- **処理フロー**: [主要な流れを簡潔に]
- **入出力**: [何を受け取り何を返すか]

## 共通パターン

[機能グループ内で共通して使われているパターン・仕組み]
```

## テンプレート: 全体概要仕様書

プロジェクト全体の構造とデータフロー。

```markdown
# [プロジェクト名] 全体概要仕様書

> 生成日: [YYYY-MM-DD]

## プロジェクト概要

[目的・技術スタック・アーキテクチャを簡潔に記述]

## システム構成図

[Mermaidダイアグラムでシステム全体の構成を図示]

## 機能グループ一覧

| # | グループ | 責務 | 主要ファイル |
|---|---------|------|------------|
| 1 | [グループ名] | [何を担当するか] | [ディレクトリ/ファイル] |

## データフロー概要

[システム全体のデータの流れをMermaidフローチャートで図示。
ユーザー → フロントエンド → バックエンド → DB 等の大きな流れ]

## データモデル概要

| # | モデル名 | 概要 | 使用箇所 |
|---|---------|------|---------|
| 1 | [名前] | [何を表すデータか] | [どの機能グループで使うか] |

## モジュール依存関係

[Mermaidダイアグラムでモジュール間の依存関係を図示]

## 詳細仕様書への参照

各機能グループの詳細は `/doc-spec` で個別に生成可能。
```

## Mermaidダイアグラム ガイド

仕様書で使用する主要なダイアグラム記法。

### フローチャート（データフロー用）

```
graph LR
    A[ユーザー入力] --> B[バリデーション]
    B --> C{条件分岐}
    C -->|条件A| D[処理A]
    C -->|条件B| E[処理B]
    D --> F[DB保存]
    E --> F
    F --> G[レスポンス]
```

### クラス図（モジュール構成用）

```
graph TD
    subgraph ルーティング層
        R[routes/]
    end
    subgraph ロジック層
        S[services/]
    end
    subgraph データ層
        D[models/]
    end
    R --> S --> D
```
