---
name: conf-claude
description: CLAUDE.mdの新規作成・改善。プロジェクト分析に基づき、ベストプラクティスに準拠したCLAUDE.mdを生成・更新する。ユーザーが「CLAUDE.mdを作成して」「CLAUDE.mdを改善して」「CLAUDE.mdを更新して」「プロジェクト設定を初期化して」と言った場合に使用する。
disable-model-invocation: false
allowed-tools: Read, Glob, Grep, Write, Edit
---

# CLAUDE.md 作成・改善スキル

プロジェクトのCLAUDE.mdを新規作成または改善する。CLAUDE.mdはClaude Codeがプロジェクトを理解するための最重要ファイル。

## 使用タイミング

- プロジェクトにCLAUDE.mdがない場合
- 既存のCLAUDE.mdを改善・更新したい場合
- プロジェクト構成が変わり、CLAUDE.mdを同期させたい場合

## ワークフロー

### ステップ1: プロジェクト分析

以下のファイルを読み取り、プロジェクトの全体像を把握する:

**情報収集チェックリスト**:
- [ ] `package.json`（全パッケージ）— 技術スタック、スクリプト、依存関係
- [ ] `tsconfig.json` / `jsconfig.json` — 言語設定
- [ ] フレームワーク設定ファイル（`next.config.*`, `vite.config.*`, `nuxt.config.*` 等）
- [ ] ディレクトリ構造（主要ディレクトリの一覧）
- [ ] `.claude/rules/` — 既存ルール
- [ ] `.claude/skills/` — 既存スキル
- [ ] `.claude/commands/` — 既存コマンド
- [ ] `README.md` — プロジェクト説明（あれば）
- [ ] CI設定（`.github/workflows/`, `.gitlab-ci.yml` 等）

### ステップ2: 判定

```
CLAUDE.mdが存在するか？
├── NO → ステップ3a（新規作成）
└── YES → ステップ3b（改善）
```

### ステップ3a: 新規作成

以下のテンプレートに基づいてCLAUDE.mdを生成する。

```markdown
# CLAUDE.md

このファイルはClaude Codeがプロジェクトを理解するためのガイドです。

## プロジェクト概要

[1〜3文でプロジェクトの目的・技術スタックを説明]

## プロジェクト構造

[主要ディレクトリとその役割をツリー形式で記載]

## 開発コマンド

[日常的に使用するコマンドをコードブロックで記載]

## 規約

[コーディング規約の要約、または `.claude/rules/` への参照]

## リソース索引

[Skills, Commands, Rules等のカスタマイズファイルへの参照]
```

**生成ルール**:
- ステップ1で収集した情報をテンプレートの各セクションに当てはめる
- 開発コマンドは実際の `package.json` scripts から抽出する
- 規約は `.claude/rules/` にファイルがあればそちらへの参照とする

### ステップ3b: 既存CLAUDE.mdの改善

既存のCLAUDE.mdを読み取り、以下の改善チェックリストで評価する:

**改善チェックリスト**:
- [ ] **行数**: 150行以下か？（超過していれば詳細をRulesに移動）
- [ ] **プロジェクト概要**: 技術スタックが記載されているか？
- [ ] **プロジェクト構造**: ディレクトリ構造が記載されているか？
- [ ] **開発コマンド**: 主要コマンドが記載されているか？実際のスクリプトと一致しているか？
- [ ] **規約索引**: `.claude/rules/` への参照があるか？
- [ ] **リソース索引**: Skills/Commands/Agentsへの参照があるか？
- [ ] **冗長な内容**: Rulesに移動すべき詳細なドメイン知識がないか？
- [ ] **陳腐化**: プロジェクトの現状と乖離している記述がないか？

改善提案をリスト形式でユーザーに提示する。

### ステップ4: ユーザー確認

- 新規作成: 生成内容をユーザーに提示し、承認を得てからファイルに書き込む
- 改善: 改善提案をユーザーに提示し、承認された項目のみ反映する

## ベストプラクティス

- **150行以下に保つ** — CLAUDE.mdは索引であり、詳細文書ではない
- **「削除したらClaudeがミスするか？」テスト** — YESの内容だけを残す
- **詳細はRulesへ** — ドメイン固有の詳細知識は `.claude/rules/` に配置する
- **開発コマンドは正確に** — 実際に動作するコマンドを記載する
- **モノレポは明示的に** — ワークスペース構成がある場合、各パッケージの役割を記載する
