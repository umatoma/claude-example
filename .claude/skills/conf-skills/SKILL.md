---
name: conf-skills
description: Skillsの新規作成・改善。ワークフロー分析に基づき、SKILL.mdと補助ファイルを生成・更新する。ユーザーが「スキルを作成して」「スキルを追加して」「ワークフローを自動化して」「スキルを改善して」と言った場合に使用する。
disable-model-invocation: false
allowed-tools: Read, Glob, Grep, Write, Edit
---

# Skills 作成・改善スキル

`.claude/skills/` 配下のスキルを新規作成または改善する。スキルはClaude Codeに再利用可能なワークフローを教えるための定義。

## 使用タイミング

- 繰り返し行う作業をスキルとして自動化したい場合
- 既存スキルを改善・更新したい場合
- コマンド/スキル/サブエージェントの使い分けを判断したい場合

## スキル vs コマンド vs サブエージェント 判定ツリー

```
自動化したい内容は？
├── ユーザーが明示的に呼び出すワークフロー
│   ├── 引数を受け取る必要がある → コマンド（.claude/commands/）
│   └── 引数不要 / コンテキスト依存 → スキル（.claude/skills/）
├── 他のスキル/コマンドから自律的に実行される処理
│   └── サブエージェント（.claude/agents/）
└── 知識・制約の定義（ワークフローではない）
    └── ルール（.claude/rules/）→ /conf-rules を使用
```

## ワークフロー

### ステップ1: 既存スキル確認

- [ ] `.claude/skills/` の全スキルを読み取る
- [ ] 重複・類似スキルがないか確認する
- [ ] 既存スキルのパターン（フロントマター形式、記述スタイル）を把握する

### ステップ2: 判定

```
目的は？
├── 既存スキルの改善 → ステップ3a
└── 新規スキルの作成 → ステップ3b
```

### ステップ3a: 既存スキルの改善

**改善チェックリスト**:
- [ ] フロントマターに `name`, `description` が設定されているか？
- [ ] `allowed-tools` で必要最小限のツールに制限されているか？
- [ ] ワークフローが明確なステップに分解されているか？
- [ ] 判定ツリーで分岐ロジックが表現されているか？
- [ ] 補助ファイルへの参照が正しいか？
- [ ] SKILL.mdがコア指示に集中しているか？（詳細は補助ファイルへ）

### ステップ3b: 新規スキル作成

**情報収集チェックリスト**:
- [ ] 自動化したいワークフローは何か？
- [ ] 必要なツールは何か？（Read, Write, Edit, Glob, Grep, Bash, WebFetch, WebSearch）
- [ ] ワークフロー中に判定ポイント（分岐）はあるか？
- [ ] テンプレートやリファレンスが必要か？
- [ ] 既存のスキル/コマンドと連携するか？

#### 3b-1: スキル設計

以下を決定する:
- **名前**: ケバブケース（例: `conf-claude`, `deploy-preview`）
- **説明**: 1文でスキルの目的を記述
- **allowed-tools**: 必要最小限のツールリスト
- **ファイル構成**: シンプル or マルチファイル

#### 3b-2: ファイル構成判定

```
スキルの複雑さは？
├── シンプル（ステップ数5以下、テンプレート不要）
│   └── SKILL.md のみ
└── 複雑（ステップ数多い、テンプレート/リファレンスあり）
    └── SKILL.md + 補助ファイル
```

**補助ファイルの種類と追加基準**:

| ファイル | 用途 | 追加基準 |
|---------|------|---------|
| `templates.md` | テンプレート集 | 生成物のテンプレートが2つ以上ある場合 |
| `reference.md` | リファレンス情報 | ツールやAPIのリファレンスが必要な場合 |
| `examples.md` | 具体例集 | 良い例/悪い例の対比が必要な場合 |
| `questions.md` | 質問テンプレート | ヒアリング項目が多い場合 |

#### 3b-3: SKILL.md作成

`reference.md` のテンプレートを参照してSKILL.mdを生成する。

**必須要素**:
- フロントマター（name, description, allowed-tools）
- 概要と使用タイミング
- ワークフロー（番号付きステップ）

**推奨要素**:
- 判定ツリー（分岐ロジックがある場合）
- 情報収集チェックリスト（行動前に確認すべき項目がある場合）
- ベストプラクティス（守るべき原則がある場合）

#### 3b-4: 補助ファイル作成

ステップ3b-2で必要と判断した補助ファイルを作成する。

### ステップ4: CLAUDE.md索引更新の提案

新規スキル作成時、CLAUDE.mdのリソース索引セクションへの追加を提案する。

## ベストプラクティス

- **フロントマター必須** — `name`, `description` は必ず設定する
- **allowed-toolsで権限制限** — 不要なツールを含めない（特にBashは慎重に）
- **判定ツリーで分岐表現** — 条件分岐はテキスト判定ツリーで視覚的に表現する
- **情報収集を先に** — 行動する前にチェックリストで必要情報を収集する
- **SKILL.mdはコア指示に集中** — テンプレートやリファレンスは補助ファイルへ分離する
- **既存パターンに合わせる** — プロジェクト内の既存スキルの記述スタイルに合わせる
